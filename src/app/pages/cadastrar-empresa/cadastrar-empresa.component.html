<div class="empresa-page">
    <div class="empresa-card">
        <h1 class="empresa-title">Cadastro de Empresas</h1>

        <form [formGroup]="formEmpresa" class="empresa-form" (ngSubmit)="submitForm()">

            <!-- Nome -->
            <div class="form-row">
                <div class="form-field full">
                    <label class="label">Nome da Organiza√ß√£o *</label>
                    <input class="input" formControlName="nome" />

                    <div *ngIf="formEmpresa.get('nome')?.touched && formEmpresa.get('nome')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('nome')?.hasError('required')">
                            O nome da empresa √© obrigat√≥rio.
                        </div>
                        <div class="error" *ngIf="formEmpresa.get('nome')?.hasError('minlength')">
                            O nome deve ter no m√≠nimo 2 caracteres.
                        </div>
                        <div class="error" *ngIf="formEmpresa.get('nome')?.hasError('maxlength')">
                            O nome deve ter no m√°ximo 100 caracteres.
                        </div>
                    </div>
                </div>
            </div>

            <!-- CNPJ -->
            <div class="form-row">
                <div class="form-field small">
                    <label class="label">CNPJ *</label>
                    <input class="input" formControlName="cnpj" appMask="cnpj" placeholder="00.000.000/0000-00" />

                    <div *ngIf="formEmpresa.get('cnpj')?.touched && formEmpresa.get('cnpj')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('cnpj')?.hasError('required')">
                            O CNPJ √© obrigat√≥rio.
                        </div>
                        <div class="error" *ngIf="formEmpresa.get('cnpj')?.hasError('pattern')">
                            O CNPJ informado √© inv√°lido.
                        </div>
                    </div>
                </div>
            </div>

            <!-- CEP -->
            <div class="form-row">
                <div class="form-field small">
                    <label class="label">CEP *</label>
                    <div class="input-icon">
                        <input class="input" formControlName="cep" appMask="cep" placeholder="00000-000"
                            maxlength="9" />
                        <button class="icon-btn" type="button"
                            [disabled]="formEmpresa.get('cep')?.invalid || formEmpresa.get('cep')?.value?.length < 9"
                            (click)="buscarCep()">üîç</button>
                    </div>

                    <div *ngIf="formEmpresa.get('cep')?.touched && formEmpresa.get('cep')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('cep')?.hasError('required')">
                            O CEP √© obrigat√≥rio.
                        </div>
                        <div class="error" *ngIf="formEmpresa.get('cep')?.hasError('pattern')">
                            O CEP deve estar no formato 00000-000.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rua + N√∫mero -->
            <div class="form-row">
                <div class="form-field flex2">
                    <label class="label">Rua *</label>
                    <input class="input" formControlName="rua" />

                    <div *ngIf="formEmpresa.get('rua')?.touched && formEmpresa.get('rua')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('rua')?.hasError('required')">
                            A rua √© obrigat√≥ria.
                        </div>
                        <div class="error" *ngIf="formEmpresa.get('rua')?.hasError('maxlength')">
                            A rua deve ter no m√°ximo 120 caracteres.
                        </div>
                    </div>
                </div>

                <div class="form-field small">
                    <label class="label">N¬∫ *</label>
                    <input class="input" formControlName="numero" />

                    <div *ngIf="formEmpresa.get('numero')?.touched && formEmpresa.get('numero')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('numero')?.hasError('required')">
                            O n√∫mero √© obrigat√≥rio.
                        </div>
                        <div class="error" *ngIf="formEmpresa.get('numero')?.hasError('maxlength')">
                            O n√∫mero deve ter no m√°ximo 10 caracteres.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Complemento + Bairro -->
            <div class="form-row">
                <div class="form-field">
                    <label class="label">Complemento</label>
                    <input class="input" formControlName="complemento" />

                    <div *ngIf="formEmpresa.get('complemento')?.touched && formEmpresa.get('complemento')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('complemento')?.hasError('maxlength')">
                            O complemento deve ter no m√°ximo 50 caracteres.
                        </div>
                    </div>
                </div>

                <div class="form-field">
                    <label class="label">Bairro *</label>
                    <input class="input" formControlName="bairro" />

                    <div *ngIf="formEmpresa.get('bairro')?.touched && formEmpresa.get('bairro')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('bairro')?.hasError('required')">
                            O bairro √© obrigat√≥rio.
                        </div>
                        <div class="error" *ngIf="formEmpresa.get('bairro')?.hasError('maxlength')">
                            O bairro deve ter no m√°ximo 80 caracteres.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cidade + Estado -->
            <div class="form-row">
                <div class="form-field flex2">
                    <label class="label">Cidade *</label>
                    <input class="input" formControlName="cidade" />

                    <div *ngIf="formEmpresa.get('cidade')?.touched && formEmpresa.get('cidade')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('cidade')?.hasError('required')">
                            A cidade √© obrigat√≥ria.
                        </div>
                        <div class="error" *ngIf="formEmpresa.get('cidade')?.hasError('maxlength')">
                            A cidade deve ter no m√°ximo 80 caracteres.
                        </div>
                    </div>
                </div>

                <div class="form-field small">
                    <label class="label">Estado *</label>
                    <input class="input" formControlName="estado" maxlength="2" appMask="uf" />

                    <div *ngIf="formEmpresa.get('estado')?.touched && formEmpresa.get('estado')?.invalid">
                        <div class="error" *ngIf="formEmpresa.get('estado')?.hasError('required')">
                            O estado √© obrigat√≥rio.
                        </div>
                        <div class="error" *ngIf="
                formEmpresa.get('estado')?.hasError('minlength') ||
                formEmpresa.get('estado')?.hasError('maxlength')
              ">
                            O estado deve conter a sigla (ex: SP, RJ, BA).
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ativo -->
            <div class="form-row">
                <label class="checkbox">
                    <input type="checkbox" formControlName="ativo" checked />
                    Empresa Ativa
                </label>
            </div>

            <p style="margin-top: var(--space-md);" class="text-muted">* Campos obrigat√≥rios</p>

            <!-- Bot√µes -->
            <div class="actions">
                <button class="btn btn-ghost" type="button" (click)="cancelar()">Cancelar</button>
                <button class="btn btn-primary" type="submit" [disabled]="formEmpresa.invalid">Salvar</button>
            </div>

        </form>
    </div>
</div>