<div class="usuario-page">
    <div class="usuario-card">
        <h1 class="usuario-title">Alterar Meus Dados</h1>

        <!-- Mensagens de erro -->
        <div *ngIf="errorMessages.length" class="error-message">
            <div class="error" *ngFor="let msg of errorMessages">{{ msg }}</div>
        </div>

        <!-- Mensagem de sucesso -->
        <div *ngIf="successfullyUpdatedUsuario" class="success">
            {{ successfullyUpdatedUsuario }}
        </div>

        <form *ngIf="formUsuario" [formGroup]="formUsuario" class="usuario-form" (ngSubmit)="submitForm()">

            <!-- Nome -->
            <div class="form-row">
                <div class="form-field full">
                    <label class="label">Nome Completo *</label>
                    <input class="input" formControlName="nome" />
                    <div *ngIf="formUsuario.get('nome')?.touched && formUsuario.get('nome')?.invalid" class="error">
                        <div *ngIf="formUsuario.get('nome')?.hasError('required')">O nome é obrigatório.</div>
                        <div *ngIf="formUsuario.get('nome')?.hasError('maxlength')">O nome deve ter no máximo 100
                            caracteres.</div>
                        <div *ngIf="formUsuario.get('nome')?.hasError('pattern')">Nome inválido. Use apenas letras,
                            espaços ou hífen.</div>
                    </div>
                </div>
            </div>

            <!-- E-mail -->
            <div class="form-row">
                <div class="form-field full">
                    <label class="label">E-mail *</label>
                    <input class="input" formControlName="email" />
                    <div *ngIf="formUsuario.get('email')?.touched && formUsuario.get('email')?.invalid" class="error">
                        <div *ngIf="formUsuario.get('email')?.hasError('required')">O e-mail é obrigatório.</div>
                        <div *ngIf="formUsuario.get('email')?.hasError('maxlength')">O e-mail deve ter no máximo 320
                            caracteres.</div>
                        <div *ngIf="formUsuario.get('email')?.hasError('pattern')">E-mail inválido.</div>
                    </div>
                </div>
            </div>

            <!-- Telefone -->
            <div class="form-row">
                <div class="form-field small">
                    <label class="label">Telefone *</label>
                    <input class="input" formControlName="telefone" appMask="telefone" placeholder="(11) 98765-4321" />
                    <div *ngIf="formUsuario.get('telefone')?.touched && formUsuario.get('telefone')?.invalid"
                        class="error">
                        <div *ngIf="formUsuario.get('telefone')?.hasError('required')">O telefone é obrigatório.</div>
                        <div
                            *ngIf="formUsuario.get('telefone')?.hasError('minlength') || formUsuario.get('telefone')?.hasError('maxlength')">
                            O telefone deve ter entre 10 e 15 caracteres.
                        </div>
                        <div *ngIf="formUsuario.get('telefone')?.hasError('pattern')"> <span class="linha">Telefone
                                inválido!</span>
                            <span class="linha">Use um formato válido, como (11) 98765-4321 ou +55 11 98765-4321</span>
                        </div>
                    </div>
                </div>
            </div>

            <p class="text-muted">* Campos obrigatórios</p>

            <div class="actions">
                <button class="btn btn-ghost" type="button" (click)="cancelar()">Cancelar</button>
                <button class="btn btn-primary" type="submit" [disabled]="formUsuario.invalid">Salvar</button>
            </div>
        </form>
    </div>
</div>