<div class="login-container">
    <!-- Lado esquerdo: Logo e informações do sistema -->
    <div class="login-left">
        <div class="login-left-content">
            <img src="assets/logo.png" alt="Logo Smartdesk" class="login-image">
            <p class="system-subtitle">Gerencie chamados com eficiência e agilidade</p>
        </div>
    </div>

    <!-- Lado direito: Card de redefinição de senha -->
    <div class="login-right">
        <div class="login-card">
            <h2>Definir Senha</h2>
            <p>Escolha uma senha segura para proteger suas informações no Smartdesk</p>

            <!-- Mensagens de erro -->
            <div *ngIf="errorMessages.length > 0" class="error-message">
                <div class="error" *ngFor="let errorMessage of errorMessages">{{ errorMessage }}</div>
            </div>

            <!-- Mensagens de sucesso -->
            <div *ngIf="successMessage" class="success">
                {{ successMessage }}
            </div>

            <!-- Formulário de redefinição -->
            <form [formGroup]="formDefinePassword" (ngSubmit)="submitForm()">

                <!-- Nova senha -->
                <div class="form-group">
                    <label for="newPassword" class="label">Nova Senha</label>
                    <div class="password-wrapper">
                        <input id="newPassword" class="input" [type]="showPassword.newPassword ? 'text' : 'password'"
                            formControlName="newPassword" placeholder="Digite sua nova senha" />
                        <button type="button" class="toggle-password-btn" (click)="togglePassword('newPassword')">
                            <mat-icon>{{ showPassword.newPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                        </button>
                    </div>
                    <div
                        *ngIf="formDefinePassword.get('newPassword')?.invalid && formDefinePassword.get('newPassword')?.touched">
                        <div class="error" *ngIf="formDefinePassword.get('newPassword')?.hasError('required')">A nova
                            senha é obrigatória.</div>
                        <div class="error" *ngIf="formDefinePassword.get('newPassword')?.hasError('maxlength')">A nova
                            senha deve ter no máximo 255 caracteres.</div>
                        <div class="error" *ngIf="formDefinePassword.get('newPassword')?.hasError('minlength')">A nova
                            senha deve ter no mínimo 8 caracteres.</div>
                        <div class="error" *ngIf="formDefinePassword.get('newPassword')?.hasError('pattern')">Nova
                            Senha inválida.</div>
                    </div>
                </div>

                <!-- Confirmar senha -->
                <div class="form-group">
                    <label for="confirmPassword" class="label">Confirmar Senha</label>
                    <div class="password-wrapper">
                        <input id="confirmPassword" class="input"
                            [type]="showPassword.confirmPassword ? 'text' : 'password'"
                            formControlName="confirmPassword" placeholder="Confirme sua nova senha" />
                        <button type="button" class="toggle-password-btn" (click)="togglePassword('confirmPassword')">
                            <mat-icon>{{ showPassword.confirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                        </button>
                    </div>
                    <div
                        *ngIf="formDefinePassword.get('confirmPassword')?.invalid && formDefinePassword.get('confirmPassword')?.touched">
                        <div class="error" *ngIf="formDefinePassword.get('confirmPassword')?.hasError('required')">A
                            confirmação é obrigatória.</div>
                        <div class="error"
                            *ngIf="formDefinePassword.get('confirmPassword')?.hasError('passwordMismatch')">As senhas
                            não coincidem.</div>
                        <div class="error" *ngIf="formDefinePassword.get('confirmPassword')?.hasError('maxlength')">A
                            nova senha deve ter no máximo 255 caracteres.</div>
                        <div class="error" *ngIf="formDefinePassword.get('confirmPassword')?.hasError('minlength')">A
                            nova senha deve ter no mínimo 8 caracteres.</div>
                        <div class="error" *ngIf="formDefinePassword.get('confirmPassword')?.hasError('pattern')">
                            Senha inválida.</div>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" [disabled]="!formDefinePassword.valid">
                    Definir Senha
                </button>
            </form>

            <a class="forgot-link" routerLink="/login">Voltar ao login</a>
        </div>
    </div>
</div>